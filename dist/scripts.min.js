class Modal{constructor(e){this.$el=document.querySelector(e),this.$el.style.display="none",this.boundHide=e=>this.hide(e),this.$el.addEventListener("click",this.boundHide),this.$elForm=this.$el.querySelector(".innerModal")}hide(e){e.target===this.$el&&(this.$el.style.display="none")}simpleHide(){this.$el.style.display="none"}show(){this.$el.style.display="flex"}}const login=new Modal("#loginWindow");document.querySelector("#login_btn").addEventListener("click",()=>login.show());const logInField=document.querySelector("input[name='login']"),passwordField=document.querySelector("input[name='password']");document.querySelector("#log_in").addEventListener("click",async function(){fetch("https://ajax.test-danit.com/api/v2/cards/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:logInField.value,password:passwordField.value})}).then(e=>e.text()).then(e=>{if(36!==e.length||"-"!==e[8]||"-"!==e[13]||"-"!==e[18]||"-"!==e[23])return alert("Неверный логин или пароль");login.simpleHide(),document.querySelector("input[name='login']").value=document.querySelector("input[name='password']").value="",document.querySelector("#login_btn").style.display="none";const t=document.createElement("button");t.innerHTML="Создать визит",t.classList.add("nav__btn"),document.querySelector("nav").append(t)})});